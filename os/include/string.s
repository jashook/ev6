/* ************************************************************************** */
/* ************************************************************************** */
/*                                                                            */
/* Author: Jarret Shook                                                       */
/*                                                                            */
/* Module: string.s                                                           */
/*                                                                            */
/* Modifications:                                                             */
/*                                                                            */
/* 13-Aug-13: Version 1.0: Last Updated                                       */
/* 13-Aug-13: Version 1.0: Created                                            */
/*                                                                            */
/* Timeperiod: ev7n                                                           */
/*                                                                            */
/* Notes:                                                                     */
/*                                                                            */
/* All Functions pass parameters over the stack for compatibility with c      */
/*                                                                            */
/* ************************************************************************** */
/* ************************************************************************** */

#ifndef __STRING_S__
#define __STRING_S__

/* ************************************************************************** */
/* ************************************************************************** */
/* Function: str_len                                                          */
/*                                                                            */
/* Parameters:                                                                */
/*                                                                            */
/*    r0: pointer to a string                                                 */
/*                                                                            */
/* Returns:                                                                   */
/*                                                                            */
/*    r1: size of the string                                                  */
/*                                                                            */
/* ************************************************************************** */
/* ************************************************************************** */

str_len:

         mov   r1, #0            @ r1 = 0

str_len_loop:

         ldrb  r2, [r0], #1      @ r2 = *(r0++)
         add   r1, r1, #1
         cmp   r2, #0            @ null terminator?

         bne   str_len_loop      @ jump if not equal back to str_len_loop

         sub   r1, r1, #1

         mov   pc, lr

/* ************************************************************************** */
/* ************************************************************************** */

#endif /* __STRING_S__ */

/* ************************************************************************** */
/* ************************************************************************** */
